<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-K85FBTFL');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Icedtooz — Tira Cómica Semanal</title>
  <meta name="description" content="Icedtooz, tira cómica semanal con humor y aventuras originales. Descubre nuevas tiras cada semana online.">
  <meta name="keywords" content="tira cómica, Icedtooz, cómic online, humor, webcomic, historias semanales">
  <meta name="author" content="@icedtooz">
  <link rel="apple-touch-icon" href="assets/icons/favicon.png">
  <meta name="theme-color" content="#9cd3f7">
  <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">

  <link rel="preconnect" href="https://www.youtube.com">
  <link rel="preconnect" href="https://i.ytimg.com">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>

  <style>
    @font-face {
      font-family: 'Grafical';
      src: url('assets/fonts/Grafical-Regular.woff') format('woff');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    :root{
      --bg-color:#fdfefe;
      --text-color:#222;
      --accent:#0086ff;
      --social-color:#24040e;
    }

    html,body{height:100%}
    body{
      font-family: 'Grafical', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color:var(--bg-color);
      color:var(--text-color);
      margin:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      scroll-behavior:smooth;
      background-image:
        linear-gradient(to right,#9DDEFF 1px, transparent 1px),
        linear-gradient(to bottom, #9DDEFF 1px, transparent 1px);
      background-size:24px 24px;
    }

    h1,h2,h3,p,a,input,textarea,button,li{font-family:inherit}

    header{ text-align:center; margin-top:2rem; padding:0 1rem }
    #logo{ width:180px; height:180px; margin:0 auto; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2)) }
    header h1{ font-size:2rem; margin:0.6rem 0 0.3rem }
    header p{ color:#555; margin:0 }

    main{
      width:100%;
      max-width:1200px;
      padding:2rem 1rem;
      display:flex;
      flex-direction:column;
      gap:3rem;
      box-sizing:border-box;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:1.5rem;
    }

    .comic{
      background:white;
      border-radius:10px;
      overflow:hidden;
      box-shadow:0 4px 10px rgba(0,0,0,0.08);
      transition:transform .2s ease;
      cursor:pointer;
    }
    .comic:hover{ transform:translateY(-4px) }
    .comic img{ width:100%; display:block; opacity:0; transform:translateY(20px); transition:opacity .5s, transform .5s }

    section.about, section.contact{
      text-align:left;
      padding:2rem 1rem;
      background-color:rgba(255,255,255,0.9);
      border-radius:10px;
      box-shadow:0 2px 8px rgba(0,0,0,0.06);
      max-width:1200px;
      margin:0 auto;
    }

    .contact-wrapper{ display:flex; gap:2rem; align-items:stretch; flex-wrap:wrap; margin-top:1rem }
    .contact-wrapper form{ flex:1 1 420px; max-width:50%; display:flex; flex-direction:column; gap:1rem; box-sizing:border-box; justify-content:center }
    .contact-image { flex:1 1 300px; max-width:50%; display:flex; align-items:center; justify-content:center }
    .contact-image img{ width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.12); display:block }

    .contact input[type="text"], .contact input[type="email"], .contact textarea {
      padding:0.75rem; border-radius:8px; border:1px solid #d0dbe9; outline:none; transition:box-shadow .2s, border-color .2s; font-size:1rem; box-sizing:border-box;
    }
    .contact input:focus, .contact textarea:focus { border-color:var(--accent); box-shadow:0 4px 14px rgba(13,110,255,0.12) }
    .contact button { padding:0.8rem 1.25rem; border-radius:999px; border:none; background:var(--accent); color:#fff; cursor:pointer; font-size:1rem; align-self:start; transition:transform .15s, background .15s }
    .contact button:hover { transform:translateY(-2px); background:#1d8ae0 }

    .socials{ margin-top:1.25rem; display:flex; gap:1rem; align-items:center }
    .socials img{ width:28px; height:28px; display:block; transition:transform .15s, filter .15s; filter:none }
    .socials img:hover{ transform:scale(1.08); filter:brightness(.9) saturate(1.2) }

    #backToTop{ position:fixed; bottom:20px; right:20px; width:36px; height:36px; border:2px solid var(--social-color); border-radius:50%; background:transparent; cursor:pointer; z-index:100; opacity:.8; display:flex; align-items:center; justify-content:center; visibility:hidden }
    #backToTop:hover{ transform:translateY(-2px); opacity:1 }

    #lightbox{ position:fixed; inset:0; background:rgba(0,0,0,.85); display:flex; justify-content:center; align-items:center; z-index:999; visibility:hidden; opacity:0; transition:opacity .25s, visibility .25s; padding:1rem }
    #lightbox.visible{ visibility:visible; opacity:1 }
    #lightbox img{ max-width:92%; max-height:92%; border-radius:10px; box-shadow:0 6px 30px rgba(0,0,0,.6) }

    footer{ text-align:center; padding:1rem 1rem; color:var(--social-color); font-family:inherit; font-size:.9rem; width:100%; margin-top:2rem }

    @media(max-width:980px){ .contact-wrapper form, .contact-wrapper .contact-image { max-width:100%; flex-basis:100% } section.about, section.contact { text-align:left; padding:1.5rem } header h1{ font-size:1.6rem } }

    /* iPod player */
    .ipod {
      width:320px;
      max-width:95%;
      margin: 1.5rem auto;
      background: linear-gradient(180deg,#fafafa,#e9f6ff);
      border-radius:18px;
      box-shadow:0 12px 30px rgba(0,0,0,0.18);
      padding:14px;
      font-family:inherit;
    }
    .ipod-screen {
      border-radius:10px;
      background:white;
      padding:12px;
      display:grid;
      grid-template-columns:72px 1fr;
      gap:12px;
      align-items:center;
    }
    #ipod-cover { width:72px; height:72px; object-fit:cover; border-radius:6px; box-shadow:0 6px 14px rgba(0,0,0,.12); display:block }
    .track-info { text-align:left }
    #track-title { font-weight:700; font-size:.95rem }
    #track-artist { font-size:.85rem; color:#666; margin-top:4px }
    #progress-wrap { height:6px; background:#f1f5fb; border-radius:999px; margin-top:12px; grid-column:1/-1; overflow:hidden }
    #progress { height:100%; background:linear-gradient(90deg,var(--accent),#1d8ae0); width:0%; transition:width .2s linear }
    .ipod-wheel { display:flex; justify-content:space-between; gap:8px; margin-top:12px }
    .wheel-btn { flex:1; background:transparent; border:1px solid rgba(0,0,0,0.06); border-radius:8px; padding:8px; cursor:pointer }
    .wheel-btn:active { transform:translateY(1px) }

  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K85FBTFL"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header>
    <div id="logo" aria-hidden="true"></div>
    <h1>dibujo porque me duele</h1>
    <p>todavía estamos terminando la web, pero ya nos puedes escribir&nbsp;</p>
  </header>

  <main>
    <section class="grid" aria-label="Tiras">
      <div class="comic"><img src="assets/tiras/tira01.png" alt="Tira cómica Icedtooz #01"></div>
      <div class="comic"><img src="assets/tiras/tira02.png" alt="Tira cómica Icedtooz #02"></div>
      <div class="comic"><img src="assets/tiras/tira03.png" alt="Tira cómica Icedtooz #03"></div>
    </section>

    <section class="about" aria-labelledby="about-title">
      <h2 id="about-title">about&nbsp;</h2>
      <p>Icedtooz es una tira cómica semanal con humor, aventuras y personajes originales. ¡Síguenos cada semana para nuevas historias!</p>
    </section>

    <section aria-labelledby="music-title" style="max-width:1200px; margin:0 auto; padding:0 1rem;">
      <h2 id="music-title" style="margin:0 0 .5rem 0;">Música</h2>

      <div class="ipod" id="ipod">
        <div class="ipod-screen">
          <img id="ipod-cover" src="assets/ipod-placeholder-cover.jpg" alt="cover">
          <div class="track-info">
            <div id="track-title">Cargando playlist…</div>
            <div id="track-artist">Icedtooz playlist</div>
            <div id="progress-wrap"><div id="progress"></div></div>
          </div>
        </div>

        <div class="ipod-wheel" style="margin-top:12px;">
          <button id="ipod-prev" class="wheel-btn" aria-label="Anterior">◀</button>
          <button id="ipod-play" class="wheel-btn" aria-label="Play/Pausa">▶</button>
          <button id="ipod-next" class="wheel-btn" aria-label="Siguiente">▶▶</button>
        </div>
      </div>

      <div id="player-container">
        <div id="yt-player"></div>
      </div>
    </section>

    <section class="contact" aria-labelledby="contact-title">
      <h2 id="contact-title">Deja aquí tus sugerencias, halagos o insultos ;)</h2>

      <div class="contact-wrapper">
        <form id="contactForm" action="https://formspree.io/f/xeovjaav" method="POST" aria-label="Formulario de contacto">
          <input type="text" name="name" placeholder="¿Cómo te llamas?" required aria-label="Nombre">
          <input type="email" name="email" placeholder="Dinos tu email" required aria-label="Correo electrónico">
          <textarea name="message" placeholder="Cuéntanos" required rows="5" aria-label="Mensaje"></textarea>
          <button type="submit">Enviar</button>
        </form>

        <div class="contact-image" aria-hidden="true">
          <img src="assets/icedtooz-handle.png" alt="Imagen de contacto">
        </div>
      </div>

      <p class="form-status" style="margin-top:1rem; color:green;" aria-live="polite"></p>

      <div class="socials" aria-label="Redes sociales">
        <a href="https://instagram.com/icedtooz" target="_blank" aria-label="Instagram">
          <img src="assets/icons/instagram.svg" alt="Instagram">
        </a>
        <a href="https://icedtooz.bsky.social/" target="_blank" aria-label="Bluesky">
          <img src="assets/icons/bluesky.svg" alt="Bluesky">
        </a>
        <a href="https://tiktok.com/@icedtooz" target="_blank" aria-label="TikTok">
          <img src="assets/icons/tiktok.svg" alt="TikTok">
        </a>
        <a href="https://facebook.com/icedtooz" target="_blank" aria-label="Facebook">
          <img src="assets/icons/facebook.svg" alt="Facebook">
        </a>
        <a href="https://youtube.com/@icedtooz" target="_blank" aria-label="YouTube">
          <img src="assets/icons/youtube.svg" alt="YouTube">
        </a>
        <a href="https://x.com/icedtooz" target="_blank" aria-label="X">
          <img src="assets/icons/x.svg" alt="X">
        </a>
      </div>
    </section>
  </main>

  <footer>
    icedtooz 2025 © Todos los derechos reservados
  </footer>

  <div id="lightbox" role="dialog" aria-hidden="true"><img src="" alt="Tira ampliada"></div>

  <button id="backToTop" aria-label="Volver arriba" title="Volver arriba" aria-hidden="true">
    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M6 0 L6 12 M0 6 L6 0 L12 6" stroke="#222" stroke-width="2"/>
    </svg>
  </button>

  <script>
    lottie.loadAnimation({
      container: document.getElementById('logo'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: 'assets/logo.json'
    });

    // Contact Form
    const contactForm = document.getElementById('contactForm');
    const formStatus = document.querySelector('.form-status');
    contactForm.addEventListener('submit', async e => {
      e.preventDefault();
      const formData = new FormData(contactForm);
      const response = await fetch(contactForm.action, {method: contactForm.method, body: formData, headers:{'Accept':'application/json'}});
      if(response.ok){formStatus.textContent="¡Mensaje enviado! Gracias por contactarnos."; contactForm.reset(); formStatus.style.color="#0086ff";}
      else{formStatus.textContent="Error al enviar. Por favor, inténtalo de nuevo."; formStatus.style.color="#ff45b2";}
    });

    // Scroll fade-in for comics
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => { if(entry.isIntersecting){ const img=entry.target.querySelector('img'); if(img){ img.style.opacity=1; img.style.transform='translateY(0)'; } } });
    },{threshold:0.2});
    document.querySelectorAll('.comic').forEach(el=>observer.observe(el));

    // Back to top
    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll',()=>{backToTop.style.visibility=window.scrollY>200?'visible':'hidden';});
    backToTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('img');
    document.querySelectorAll('.comic img').forEach(img => img.addEventListener('click',()=>{ lightboxImg.src=img.src; lightbox.classList.add('visible'); lightbox.style.visibility='visible'; lightbox.setAttribute('aria-hidden','false'); }));
    lightbox.addEventListener('click',(e)=>{ if(e.target===lightbox){ lightbox.classList.remove('visible'); lightbox.style.visibility='hidden'; lightbox.setAttribute('aria-hidden','true'); } });
    window.addEventListener('keydown',(e)=>{ if(e.code==='Space'){ lightbox.classList.remove('visible'); lightbox.style.visibility='hidden'; lightbox.setAttribute('aria-hidden','true'); } });

    // ====== iPod / YouTube player ======
    const DEFAULT_YT_PLAYLIST_ID = 'PLThqpxAn2mQb819ObhwCG04zBZ2J77bS1';
    const ipodPlayBtn = document.getElementById('ipod-play');
    const ipodNextBtn = document.getElementById('ipod-next');
    const ipodPrevBtn = document.getElementById('ipod-prev');
    const ipodTitle = document.getElementById('track-title');
    const ipodArtist = document.getElementById('track-artist');
    const ipodCover = document.getElementById('ipod-cover');
    const ipodProgress = document.getElementById('progress');

    let YTplayer = null;
    let isPlaying = false;
    let progressInterval = null;

    const playerContainer = document.getElementById('player-container');
    playerContainer.style.visibility='hidden';
    playerContainer.style.width='0px';
    playerContainer.style.height='0px';
    playerContainer.style.position='absolute';
    playerContainer.style.left='-9999px';

    function loadYTPlayerAndPlay() {
      if(YTplayer){ YTplayer.playVideo(); return; }
      const tag=document.createElement('script'); tag.src="https://www.youtube.com/iframe_api"; document.head.appendChild(tag);
      window.onYouTubeIframeAPIReady = () => {
        YTplayer = new YT.Player('yt-player',{
          height:'1', width:'1', playerVars:{controls:0,disablekb:1,rel:0,modestbranding:1,iv_load_policy:3,listType:'playlist',list:DEFAULT_YT_PLAYLIST_ID},
          events:{
            onReady:e=>{
              console.log('YT API ready');
              e.target.setVolume(80);
              e.target.playVideo();
              bindProgressUpdater();
              updateTrackInfo();
            },
            onStateChange:onYTStateChange
          }
        });
      };
    }

    function onYTStateChange(e){
      const state=e.data;
      if(state===YT.PlayerState.PLAYING){ isPlaying=true; ipodPlayBtn.textContent='⏸'; updateTrackInfo(); }
      else if(state===YT.PlayerState.PAUSED){ isPlaying=false; ipodPlayBtn.textContent='▶'; }
      else if(state===YT.PlayerState.ENDED){ isPlaying=false; ipodPlayBtn.textContent='▶'; }
    }

    function handleAction(action){
      if(!YTplayer){ loadYTPlayerAndPlay(); return; }
      switch(action){
        case 'playToggle': if(isPlaying)YTplayer.pauseVideo(); else YTplayer.playVideo(); break;
        case 'next': YTplayer.nextVideo(); break;
        case 'prev': YTplayer.previousVideo(); break;
      }
    }

    function updateTrackInfo(){
      if(!YTplayer) return;
      try{
        const d=YTplayer.getVideoData();
        if(d.title) ipodTitle.textContent=d.title;
        if(d.author) ipodArtist.textContent=d.author;
        if(d.video_id) ipodCover.src=`https://i.ytimg.com/vi/${d.video_id}/hqdefault.jpg`;
      }catch(err){ console.warn('updateTrackInfo error',err); }
    }

    function bindProgressUpdater(){
      if(progressInterval) clearInterval(progressInterval);
      progressInterval=setInterval(()=>{
        try{
          const t=YTplayer.getCurrentTime();
          const d=YTplayer.getDuration();
          if(d>0) ipodProgress.style.width=Math.min(100,Math.round((t/d)*100))+'%';
        }catch(err){}
      },500);
    }

    ipodPlayBtn.addEventListener('click',()=>handleAction('playToggle'));
    ipodNextBtn.addEventListener('click',()=>handleAction('next'));
    ipodPrevBtn.addEventListener('click',()=>handleAction('prev'));
  </script>
</body>
</html>
